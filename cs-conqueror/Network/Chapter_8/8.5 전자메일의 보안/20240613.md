# 전자메일의 보안 : 애플리케이션 계층

<br>

## 보안 서비스

---

> 인터넷 프로토콜 스택 위쪽 4개 계층의 어느 곳에서나 보안 서비스 제공

### 다양한 계층에서 보안 기능이 제공되는 이유
 - 네트워크 계층에서 데이터그램의 모든 데이터를 암호화하고 모든 출발지 IP 주소를 인증하더라도 사용자 레벨의 보안은 제공할 수 없음
 - 프로토콜 스택의 상위 계층에서 보안 서비스를 포함한 새로운 인터넷 서비스 구현이 점차 쉬워짐

<br>

## 보안 전자메일

---

 ### 기밀성
 
 <p align="center"><img width="500" src="https://user-images.githubusercontent.com/76640167/217525558-f8e45897-3701-4630-bb11-cb8b78d42edf.png" alt="기밀성"></p>
 
  1. 임의의 대칭 세션키를 선택
  2. 대칭키로 메시지를 암호화
  3. 대칭키는 공개키로 암호화
  4. 암호화된 메시지와 대칭키를 하나로 이어 붙임
  5. 수신자의 전자메일 주소로 전송
  6. 수신자는 개인키를 사용해 대칭키 얻음
  7. 대칭키로 메시지를 복호화

### 메시지 무결성, 송신자 인증

<p align="center"><img width="500" src="https://user-images.githubusercontent.com/76640167/217525553-ee567afd-d3ba-4ae7-a883-52421b55fd0e.png" alt="인증"></p>

 1. 메시지 요약문을 얻기 위해 자신의 메시지를 해시 함수를 적용
 2. 전자서명을 만들기 위해 해시 함수의 결과를 개인키로 암호화
 3. 원래의 메시지와 서명을 결합
 4. 수신자의 전자메일주소로 전송
 5. 수신자는 서명된 메시지 요약문에 송신자의 공개키를 적용
 6. 연산의 결과를 자신이 해시 함수를 메시지에 적용한 결과와 비교

### 수신자 인증

### 대부분의 보안 전자메일 설계 : 위의 두 단계를 결합

<p align="center"><img width="500" src="https://user-images.githubusercontent.com/76640167/217525541-71da564f-6b9d-4b60-a9b8-10c199e5bcc7.png" alt="통합"></p>

- 안전하게 공개키를 배포하기 위해 CA를 통해 공개키를 인증

<br>

## PGP(Pretty Good Privacy)

---

 - MD5나 SHA를 메시지 요약문 계산에 사용
 - CAST, triple-DES, IDEA를 대칭키 암호화를 위해 사용
 - RSAP를 공개키 암호화를 위해 사용
 - PGP가 설치되면 소프트웨어는 사용자를 위한 공개키 쌍을 만듬
 - 개인키를 사용하려면 사용자는 비밀번호를 입력
 - 사용자는 메시지를 전자서명하거나, 암호화하거나, 두 가지 모두를 하는 선택 가능
 - PGP 공개키는 같은 물리적 공간(신뢰의 그물)에서 공개키를 교환하고 그들의 개인키로 서명하는 것으로 서로의 키를 보증
 - PGP로 서명된 메시지는 수신자가 무결성을 확인하기 위해 송신자의 공개키에 접근하고, 기밀성도 원한다면 비밀 PGP 메시지를 PGP로 서명된 메시지 내부에 포함


