# 2.1 네트워크 애플리케이션의 원리

[2.1.1] 네트워크 애플리케이션의 구조 </br>
[2.1.2] 프로세스 간 통신 </br>
[2.1.3] 애플리케이션이 이용 가능한 트랜스포트 서비스 </br>
[2.1.4] 인터넷 전송 프로토콜이 제공하는 서비스 </br>
[2.1.5] 애플리케이션 계층 프로토콜 </br>

</br>
</br>
</br>
</br>

## 2.1.1 네트워크 애플리케이션 구조
애플리케이션 구조는 애플리케이션이 다양한 종단 시스템에서 **어떻게 조직되어야하는지** 알려준다.

애플리케이션 개발자는 애플리케이션 구조를 선택하여 작성할 것이다. → <ins>클라이언트-서버 구조</ins> or <ins>P2P 구조</ins>
</br>
</br>

### 클라이언트-서버(client-server)구조
- 항상 동작하고 있는 서버가 존재하고, 클라이언트라는 다른 호스트들로부터 서비스 요청을 받는다.
- <ins>서버는 항상 동작하고 있으므로 클라이언트는 서버 주소(고정 IP 주소)로 패킷을 보내서 언제든지 서버에 연결</ins>할 수 있다.
- 클라이언트는 서로 직접적으로 통신하지 않는다.
- 하나의 서버 호스트가 자신의 클라이언트로부터 오는 모든 요청에 다 응답하는 것은 불가능하다. 이러한 이유로 많은 후의 호스트를 갖춘 데이터 센터가 강력한 가상의 서버를 생성하는 역할로 사용된다. 
</br>

### P2P 구조
- 피어(peer)라는 간헐적으로 연결된 호스트 쌍이 서로 직접 통신한다.
  - 피어는 서비스 제공자가 소유하지 않고 사용자들이 제어하는 데스크톱과 랩톱이다.
- <ins>특정 서버를 통하지 않고 피어가 통신하므로 이 구조를 피어 투 피어(peer-to-peer)</ins>라고 한다.
- 자기 확장성을 가진다. (각 피어들은 파일을 다른 피어들에게 분배함으로써 그 시스템에 서비스 능력을 추가한다.)
- 비용 효율적이다. (데이터 센터 등이 필요없다.)
- 그러나 고도의 분산 구조 특성으로 인해 보안, 성능, 신뢰성 면에서 커다란 도전을 맞이하고 있다.
</br>
</br>
</br>
</br>

## 2.1.2 프로세스 간 통신
운영체제에서 실제로 통신하는 것은 프로그램이 아니라 **프로세스**이다.
프로세스는 종단 시스템에서 실행되는 프로그램이다.</br>
  → 2개의 종단 시스템에서 프로세스는 컴퓨터 네트워크를 통한 메시지 교환으로 서로 통신한다.</br>
  → **송신 프로세스는 메시지를 만들어서 보내고, 수신 프로세스는 메시지를 받고 역으로 메시지를 보냄으로써 응답**한다.</br>
</br>

### 클라이언트와 서버 프로세스
> 두 프로세스 간 통신 세션에서 통신을 초기화(다른 프로세스와 세션을 시작하려고 접속을 초기화)하는 프로세스를 <code>클라이언트(client)</code>라 하고,</br>
> 세션을 시작하기 위해 접속을 기다리는 프로세스를 <code>서버(server)</code>라고 한다.
- 요청을 보내는 쪽의 프로세스를 클라이언트라 하고, 요청을 받는 쪽을 서버라고 한다.
</br>

### 프로세스와 컴퓨터 네트워크 사이의 인터페이스
> 하나의 프로세스로부터 다른 프로세스로 보내는 메시지는 네트워크를 통해 움직이는데,</br>
> 이때 프로세스는 <code>소켓(socket)</code>을 통해 네트워크로 메시지를 보내고 받는다.
</br>
소켓은 애플리케이션 계층과 트랜스포트 계층간의 인터페이스이다. (= 애플리케이션과 네트워크 사이의 API) </br>
 </br>
 
**프로세스와 소켓의 이해를 돕는 비유**</br>
- 프로세스는 집, 소켓은 출입구</br>
프로세스가 메시지를 다른 호스트의 프로세스로 보내고 싶을때, 그것은 소켓(출입구) 바깥 네트워크로 메시지를 밀어낸다. </br>
→ 송신 프로세스의 출입구 뒤편 전송 구조가 있다. </br>
→ 메시지가 목적지 호스트에 도착하면 메시지는 수신 프로세스의 출입구를 거치고 수신 프로세슨느 메시지를 처리힌다. </br>
</br>

### 프로세스 주소 배정
> 한 호스트 상에서 수행되고 있는 프로세스가 패킷을 다른 호스트에서 수행되고 있는 프로세스로 패킷을 보내기 위해서는 수신 프로세스가 주소를 가져야한다.</br>

**수신 프로세스를 식별**하기 위해서는 두 가지 정보가 필요하다.</br>
1. 호스트의 주소 즉, IP 주소</br>
2. 호스트 내의 수신 프로세스를 명시하는 별자 즉, port 번호
</br>
</br>
</br>
</br>

## 2.1.3 애플리케이션이 이용 가능한 트랜스포트 서비스
> <code>송신 측의 애플리케이션</code>은 소켓을 통해 메시지를 보내고,</br>
> <code>트랜스포트 프로토콜</code>은 네트워크를 통해 그 메시지를 수신 프로세스의 소켓으로 이동시킬 책임이 있다.
</br>
인터넷을 포함해서 많은 네트워크는 하나 이상의 트랜스포트 프로토콜을 제공한다.</br></br>

애플리케이션을 개발할 때는 **사용 가능한 트랜스포트 프로토콜 중에서 하나를 선택**해야 한다.</br>

<ins>트랜스포트 프로토콜이 그것을 이용하는 애플리케이션에게 제공할 수 있는 4가지 서비스</ins>
- 신뢰적 데이터 전송
- 처리율
- 시간
- 보안

### 신뢰적 데이터 전송(reliable data transfer)
1장에서 보았듯이, 패킷들은 컴퓨터 네트워크 내에서 손실될 수 있다.</br>
이러한 데이터 손실은 위험한 결과를 초래할 수 있다.

</br>

만약 **프로토콜이 보장된 데이터 전송 서비스를 제공한다면** `신뢰적 데이터 전송`이라고 한다.</br>
트랜스포트 프로토콜이 이 서비스를 제공할 때, 송신 프로세스는 데이터를 소켓으로 보내고 그 데이터가 오류 없이 수신 프로세스에 도착할 것이라는 확신을 갖는다.

</br>

트랜스포트 프로토콜이 이 서비스를 제공하지 않을 때 송신 프로세스가 보낸 데이터는 전혀 도착하지 않을 수 있다.</br>
이러한 애플리케이션을 손실 허용 애플리케이션(실시간 비디오/오디오 애플리케이션 등이 대표적)이라고 한다.

</br>

### 처리율(throughput)

다른 세션들이 네트워크 경로를 따라 대역폭을 공유하고, 이 세션들이 생겼다 없어졌다 하기 때문에 가용한 처리율은 시간에 따라 변한다.</br>
트랜스포트 프로토콜은 어느 명시된 속도에서 **보장된 가용 처리율**을 제공한다.

</br>

처리율 요구사항을 갖는 애플리케이션은 `대역폭 민감 애플리케이션`이라 하고, 현존하는 많은 멀티미디어 애플리케이션은 대역폭에 민감하다.  </br>
반대로 요구사항이 없는 애플리케이션을 `탄력적 애플리케이션(elastic apps)`이라고 한다.

</br>

### 시간(timing)

트랜스포트 프로토콜은 시간 보장을 제공할 수 있다.</br>
예를 들어, 송신자가 소켓으로 내보내는 모든 비트가 수신자의 소켓에 100ms 내에 도착하게 할 수 있다.</br>
실시간 애플리케이션에 주로 사용된다.

</br>

### 보안(security)

송신 호스트에서 트랜스포트 프로토콜은 모든 데이터를 암호화할 수 있고, 수신 호스트에서 트랜스포트 프로토콜은 모두 해독할 수 있다.</br>
보통 TCP를 **애플리케이션 계층에서 강화하여 TLS로 보안 서비스를 제공한다.**

</br>
</br>
</br>
</br>

## 2.1.4 인터넷 전송 프로토콜이 제공하는 서비스

</br>

### TCP 서비스

TCP 전송 프로토콜은 다음 세 가지 서비스를 제공한다.

</br>

- 연결 지향형 서비스

**애플리케이션 계층 메시지를 전송하기 전에 TCP는 클라이언트와 서버가 서로 전송 제어 정보를 교환하게 한다.**

이 `핸드 셰이킹(handshaking) 과정`이 클라이언트와 서버에 패킷이 곧 도달할테니 준비하라고 알려주는 역할을 한다.

</br>

핸드셰이킹 단계를 지나면, TCP 연결이 두 프로세스의 소켓 사이에 존재한다고 말한다.

이 연결은 두 프로세스가 서로에게 동시에 메시지를 보낼 수 있기에 `전이중 연결`이라고 한다.

<br/>

- 신뢰적인 데이터 전송 서비스

통신 프로세스는 **모든 데이터를 오류 없이 올바른 순서로 전달하기 위해** TCP에 의존한다.

TCP는 애플리케이션의 한 쪽이 바이트 스트림을 소켓으로 전달하면, 그 바이트 스트림이 손실되거나 중복되지 않게 수신 소켓으로 전달한다.

</br>

- 혼잡 제어 방식

네트워크가 혼잡 상태에 이르면 프로세스의 속도를 낮추는 방법 

</br>
</br>

### UDP 서비스

UDP는 최소의 서비스 모델을 가진 간단한 전송 프로토콜이다.

UDP는 **비연결형**으로 핸드셰이킹 과정이 없고, **비신뢰적인 데이터 전송 서비스**를 제공하여 데이터가 전달되는 것을 보장하지 않는다.

</br>

UDP는 또한 **혼잡 제어 방식을 포함하지 않아** 프로세스의 속도 저하 없이 네트워크를 이용할 수 있다.

그러나 혼잡으로 인해 종단 간 처리율이 낮아져서 속도가 오히려 더 낮아질 수 있다.

</br>
</br>

### 인터넷 트랜스포트 프로토콜이 제공하지 않는 서비스

TCP와 UDP는 처리율 혹은 시간 보장 서비스를 제공하지 않는다.

시간 민감 애플리케이션 같은 경우에는 이러한 처리율 및 시간 지연에 잘 대처할 수 있도록 설계되어 있다.

그러나 지연이 과도할 때는 보장이 없기 때문에 한계가 있다.

</br>
</br>
</br>
</br>


## 2.1.5 애플리케이션 계층 프로토콜

> 💡 애플리케이션 계층 프로토콜은 다른 종단 시스템에서 실행되는 **애플리케이션의 프로세스가 서로 메시지를 보내는 방법을 정의한다.**

</br>

이는 다음과 같은 내용을 정의한다.

- 교환 메시지의 타입
- 여러 메시지 타입의 `문법(syntax)`
- 필드의 의미, 즉 필드에 있는 정보의 `의미(semantics)`
- 언제, 어떻게 프로세스가 메시지를 전송하고 메시지에 응답하는지를 결정하는 규칙

</br>

여러 애플리케이션 계층 프로토콜은 RFC에 명시되어 있어 공중 도메인에서 찾을 수 있다.

예를 들어, 만약 브라우저 개발자가 HTTP 규칙을 따른다면, HTTP 규칙을 따른 어떠한 웹 서버로부터도 웹페이지를 가져올 수 있다.

다른 많은 애플리케이션 계층 프로토콜은 독점이며 공중 도메인에서 찾을 수 없다.

</br>

애플리케이션 계층 프로토콜은 네트워크 애플리케이션의 **한 요소**일 뿐이다.

예를 들어, 웹 애플리케이션은 문서 포맷 표준, 웹 브라우저, 웹 서버, 웹 애플리케이션 계층 프로토콜(HTTP)을 포함하는 여러 요소들로 구성된다.

</br>
</br>
</br>
</br>
